{% extends "sober/base.html" %}
{% load i18n %}

{% block title %}{{sp.page_options.title}}: {{ block.super }}{% endblock %}
{% block content %}


{{sp.content}}
{% if sp.utc_comment %}
<!-- {{sp.utc_comment}}  -->
{% endif %}

{% if sp.parent_brick %}
    {% include sp.parent_brick.template with brick=sp.parent_brick page_options=sp.page_options only %}
{% endif %}

{% if sp.newly_fabricated_brick %}
    {% include sp.newly_fabricated_brick.template with brick=sp.newly_fabricated_brick page_options=sp.page_options only %}
{% endif %}

{% if sp.form %}

<!-- !! hcl -->
<div class="vspace">
<hr>
{% if sp.form.action_url_name == "new_brick" %}
    {# here new brick means new_reaction_brick #}
    Deine Reaktion: {{sp.long_brick_type}} neu erstellen:
{% elif sp.form.action_url_name == "new_thesis" %}
    Neue These erstellen:
{% else %}
    {# edit-mode #}
    Diskussionsbaustein ({{sp.long_brick_type}}) bearbeiten:
{% endif %}
</div>
<hr>
<div class="brick_form">
{# for information how to manually render a form, see #}
{# https://www.webforefront.com/django/formtemplatelayout.html #}

{% if brick_id >= 0 and type_code %}
{# ---------------  This branch is for new reaction-bricks   --------------- #}
<form action="{% url sp.form.action_url_name brick_id type_code %}" method="post">

{% elif brick_id >= 0 %}
{# ---------------  This branch is to edit bricks   --------------- #}
<form action="{% url sp.form.action_url_name brick_id %}" method="post">
{% else %}
{# ---------------  This branch is for new root-bricks (thesis)  --------------- #}
<form action="{% url sp.form.action_url_name %}" method="post">
{% endif %}


{% csrf_token %}
{{sp.form.as_p}}
<!-- !!hcl -->
<input type="submit" value="Save">
</form>
</div>
{% endif %}

<!--Type: {{pagetype}}-->
{% endblock %}

