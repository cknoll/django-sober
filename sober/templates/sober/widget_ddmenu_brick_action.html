{% extends "sober/widget_ddmenu_abstract.html" %}
{% load extra_filters %}

{% block css1 %}text-block-btn-box{% endblock %}
{% block css2 %}bold{% endblock %}
{% block head_content %}...{% endblock %}

{% block menu_content %}

{# ------- Construct chain links  ------- #}
          <!-- !! hcl -->
        {# chain symbol #}
        <span class="upward">&#x1F517; :
        {% if brick.absolute_level != 0 %}
                {# !! This whole construct might look suboptimal for high brick levels >5 #}
            {% for symbol, idx, pk in brick.parent_type_list|slice:"0:-1" %}
                {# explanation: forloop.counter0 is the absolute level of respective parent #}
                {% if forloop.counter0|subtract:page_options.bb_alevel < 0 %}
                    <a class="url_link" href="/b/{{pk}}">
                    {{symbol}}{{idx}}
                    </a>
                {%else%}
                    <a class="anchor_link" href="#{{pk}}">
                    {{symbol}}{{idx}}
                    </a>
                {%endif%}
            {% endfor %}
        {%endif%}

        <a class="anchor_link bold" href="#{{brick.pk}}">
            {{brick.type_list_tuple.0}}{{brick.type_list_tuple.1}}
        </a>
        </span>
        <hr>
{# ------- end of construct upward links ------- #}


  {% if page_options.page_type == "brick_detail" %}
          {# the following comment is used in unit tests #}
          <!-- utc_reaction_brick_drop_down_menu -->
          <!--!! hcl-->
      {% if brick.type == brick.thesis%}
        {# only allow supporting argument for thesis (to avoid confusion)#}
        <a class="block dd_menu_link" href="{% url 'new_brick' brick.pk 'pa' %}">✓ pro-argument</a>
      {%endif%}
        <a class="block dd_menu_link" href="{% url 'new_brick' brick.pk 'ca' %}">⚡ counter-argument</a>
        <a class="block dd_menu_link" href="{% url 'new_brick' brick.pk 'is' %}">&#x1f4a1; improvement suggestion</a>
        <a class="block dd_menu_link" href="{% url 'new_brick' brick.pk 'qu' %}">? question</a>
        <a class="block dd_menu_link" href="{% url 'new_brick' brick.pk 'co' %}">&#x1f5e8; comment</a>
        <hr>
  {% else %}
        <a class="block dd_menu_link" href="{% url 'show_brick' brick.pk %}">Show details for this brick</a>
        <hr>
  {%endif%}
        page_type: {{page_options.page_type}};;
        <a class="block dd_menu_link" href="{% url 'edit_brick' brick.pk %}">&#x270e; Edit</a>
        <a class="block dd_menu_link" href="#">&#9872; Moderationsbedarf</a>
  {% if brick.type == brick.thesis%}
        <hr>
        Groups:
        <a class="block dd_menu_link" href="{% url 'group_details' brick.associated_group.pk %}">{{brick.associated_group.name}}</a>
        {% for group in brick.allowed_for_additional_groups.all %}
            <a class="block dd_menu_link" href="{% url 'group_details' group.pk %}">{{group.name}}</a>
        {%endfor%}
  {%endif%}




{% endblock %}
